---
output: 
  github_document
---
```{r, include = FALSE}
options(width = 100)
```

## Overview
`econullnetr` is a package of functions for analysing ecological networks (e.g. food webs, flower-visitation networks) using null model analysis. The observed network is compared to networks generated by a null model, which assumes that the frequency with which species (nodes in the network) interact with one another is simply a consequence of their relative abundance (i.e. how often they encounter one another). Differences in the structure of observed and simulated networks (e.g. in the interaction strengths between nodes) implies that other mechanisms are involved in structuring the network.

`econullnetr` has seven functions:

1. `generate_null_net()` to run null models.
1. `test_interactions()` for comparing observed and modelled interactions between species.
1. `plot_preferences()` for comparing a consumer species' observed and expected interactions with the resource species.
1. `bipartite_stats()` for calculating a broad set of statistics for bipartite networks to compare observed and modelled networks. This draws on the functions from the `bipartite` package.
1. `plot_bipartite()` which is a wrapper for the `bipartite` package's `plotweb()` function, superimposing the null model results.
1. `generate_edgelist()` to export the null modelling results in a standard format for use with other R packages.
1. `expand_matrix()` to convert summarised interaction matrices (e.g. as used by the `bipartite` package) into a format suitable for `generate_null_net`.

The package also includes three examples, each comprising multiple data sets. See the package vignette and help files for full descriptions of the package's functionality and data sets.

## Usage
The following example runs a simple null model using one of the example data sets from `econullnetr` and displays an example of `bipartite_stats()` output and part of the output table for `test_interactions()` (shortened for brevity). Full examples covering all of the main functionality are described in the help files and package vignette.

```{r, warning=FALSE}

library(econullnetr)
set.seed(1234)
sil.null <- generate_null_net(Silene[, 2:7], Silene.plants[, 2:6], sims = 10,
                             c.samples = Silene[, 1],
                             r.samples = Silene.plants[, 1], prog.count = FALSE)


# Network-level statistics
bipartite_stats(sil.null, index.type = "networklevel",
                indices = c("linkage density", "weighted connectance", 
                            "interaction evenness"), intereven = "sum", 
                prog.count = FALSE)


# First 10 rows of the output table for inter-specific (inter-node) interactions.
#   When running this code, two warnings will normally be generated to highlight
#   that: i) a very small number of model iterations was used for this example 
#   and ii) there is a large number (155) of individual tests in the full 
#   test_interactions table, so the risk of Type I errors needs to be considered.


test_interactions(sil.null, 0.95)[1:10, ]
```

## Installation
The development version of `econullnetr` can be installed from GitHub:

```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("ivaughan/econullnetr")
```
